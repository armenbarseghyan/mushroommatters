<footer class="footer">
  <div class="footer__container">
    <div class="footer__content">
      <div class="footer__columns">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'link_list' -%}
              <div class="footer__column">
                <h4 class="footer__column-title">{{ block.settings.heading }}</h4>
                {%- if block.settings.menu != blank -%}
                  <ul class="footer__links">
                    {%- for link in linklists[block.settings.menu].links -%}
                      <li>
                        <a href="{{ link.url }}" class="footer__link">{{ link.title }}</a>
                      </li>
                    {%- endfor -%}
                  </ul>
                {%- endif -%}
              </div>
              
            {%- when 'newsletter' -%}
              <div class="footer__column footer__column--newsletter">
                <h4 class="footer__column-title">{{ block.settings.heading | default: 'Subscribe to our emails' }}</h4>
                {%- if block.settings.subheading != blank -%}
                  <p class="footer__newsletter-subtitle">{{ block.settings.subheading }}</p>
                {%- endif -%}
                
                <form class="footer__newsletter-form" data-newsletter-form>
                  <div class="footer__newsletter-input-group">
                    <input type="email" 
                           name="email" 
                           placeholder="{{ block.settings.email_placeholder | default: 'Email' }}"
                           class="footer__newsletter-input"
                           required>
                    <button type="submit" class="footer__newsletter-button">
                      {{ block.settings.button_text | default: 'Subscribe' }}
                    </button>
                  </div>
                  <p class="footer__newsletter-message" data-newsletter-message></p>
                </form>
              </div>
              
            {%- when 'social' -%}
              <div class="footer__column">
                <h4 class="footer__column-title">{{ block.settings.heading | default: 'Follow us' }}</h4>
                <div class="footer__social">
                  {%- if settings.social_twitter_link != blank -%}
                    <a href="{{ settings.social_twitter_link }}" class="footer__social-link" target="_blank" rel="noopener">
                      <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M19 4.74c-.7.31-1.45.52-2.24.61.8-.48 1.42-1.24 1.71-2.15-.75.44-1.58.76-2.46.93-.71-.76-1.72-1.23-2.84-1.23-2.15 0-3.89 1.74-3.89 3.89 0 .3.03.6.1.89-3.23-.16-6.09-1.71-8.01-4.06-.33.57-.52 1.23-.52 1.94 0 1.35.69 2.54 1.73 3.24-.64-.02-1.24-.2-1.77-.49v.05c0 1.88 1.34 3.45 3.12 3.81-.33.09-.67.14-1.02.14-.25 0-.49-.02-.72-.07.49 1.53 1.91 2.64 3.59 2.67-1.32 1.03-2.98 1.65-4.78 1.65-.31 0-.62-.02-.93-.06 1.72 1.1 3.76 1.74 5.95 1.74 7.14 0 11.04-5.92 11.04-11.04 0-.17 0-.33-.01-.5.76-.55 1.42-1.23 1.94-2.01z" fill="currentColor"/>
                      </svg>
                      <span class="visually-hidden">Twitter</span>
                    </a>
                  {%- endif -%}
                  
                  {%- if settings.social_facebook_link != blank -%}
                    <a href="{{ settings.social_facebook_link }}" class="footer__social-link" target="_blank" rel="noopener">
                      <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z" fill="currentColor"/>
                      </svg>
                      <span class="visually-hidden">Facebook</span>
                    </a>
                  {%- endif -%}
                  
                  {%- if settings.social_instagram_link != blank -%}
                    <a href="{{ settings.social_instagram_link }}" class="footer__social-link" target="_blank" rel="noopener">
                      <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M14.017 0h-8.07A5.954 5.954 0 0 0 0 5.948v8.07a5.954 5.954 0 0 0 5.948 5.947h8.07a5.954 5.954 0 0 0 5.947-5.947v-8.07A5.954 5.954 0 0 0 14.017 0zm3.94 13.017a3.94 3.94 0 0 1-3.94 3.94h-8.07a3.94 3.94 0 0 1-3.939-3.94v-8.07a3.94 3.94 0 0 1 3.94-3.939h8.07a3.94 3.94 0 0 1 3.939 3.94v8.07z" fill="currentColor"/>
                        <path d="M9.982 4.819A5.17 5.17 0 0 0 4.82 10a5.17 5.17 0 0 0 5.162 5.162A5.17 5.17 0 0 0 15.144 10a5.17 5.17 0 0 0-5.162-5.181zm0 8.319a3.157 3.157 0 1 1 0-6.315 3.157 3.157 0 0 1 0 6.315z" fill="currentColor"/>
                        <circle cx="15.156" cy="4.858" r="1.237" fill="currentColor"/>
                      </svg>
                      <span class="visually-hidden">Instagram</span>
                    </a>
                  {%- endif -%}
                  
                  {%- if settings.social_pinterest_link != blank -%}
                    <a href="{{ settings.social_pinterest_link }}" class="footer__social-link" target="_blank" rel="noopener">
                      <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 10 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0 0 20 10.017C20 4.484 15.522 0 10 0z" fill="currentColor"/>
                      </svg>
                      <span class="visually-hidden">Pinterest</span>
                    </a>
                  {%- endif -%}
                </div>
              </div>
              
            {%- when 'text' -%}
              <div class="footer__column">
                <h4 class="footer__column-title">{{ block.settings.heading }}</h4>
                <div class="footer__text">
                  {{ block.settings.text }}
                </div>
              </div>
          {%- endcase -%}
        {%- endfor -%}
      </div>
    </div>
    
    <div class="footer__bottom">
      <div class="footer__bottom-content">
        <div class="footer__copyright">
          <p>&copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. All rights reserved.</p>
        </div>
        
        {%- if section.settings.show_payment_icons -%}
          <div class="footer__payment">
            <span class="footer__payment-label">We accept</span>
            <div class="footer__payment-icons">
              <svg width="38" height="24" viewBox="0 0 38 24">
                <rect x="1" y="1" width="36" height="22" rx="4" fill="none" stroke="currentColor" stroke-width="2"/>
                <path d="M8 8h22v8H8z" fill="currentColor"/>
              </svg>
              <svg width="38" height="24" viewBox="0 0 38 24">
                <rect x="1" y="1" width="36" height="22" rx="4" fill="none" stroke="currentColor" stroke-width="2"/>
                <circle cx="19" cy="12" r="6" fill="currentColor"/>
              </svg>
            </div>
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</footer>

{% stylesheet %}
  .footer {
    background-color: rgb(var(--color-base-background-2));
    padding: 4.8rem 0 2.4rem;
    margin-top: 4.8rem;
  }
  
  .footer__container {
    max-width: var(--page-width);
    margin: 0 auto;
    padding: 0 2rem;
  }
  
  .footer__columns {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(25rem, 1fr));
    gap: 3.2rem;
    margin-bottom: 4.8rem;
  }
  
  .footer__column-title {
    font-size: 1.8rem;
    font-weight: 600;
    margin-bottom: 1.6rem;
    color: rgb(var(--color-base-accent-1));
  }
  
  .footer__links {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  .footer__links li {
    margin-bottom: 0.8rem;
  }
  
  .footer__link {
    color: rgb(var(--color-base-text));
    text-decoration: none;
    font-size: 1.4rem;
    transition: color 0.2s ease;
  }
  
  .footer__link:hover {
    color: rgb(var(--color-base-accent-1));
  }
  
  .footer__column--newsletter {
    max-width: 40rem;
  }
  
  .footer__newsletter-subtitle {
    font-size: 1.4rem;
    color: rgba(var(--color-base-text), 0.7);
    margin-bottom: 2.4rem;
    line-height: 1.5;
  }
  
  .footer__newsletter-form {
    margin-bottom: 1.6rem;
  }
  
  .footer__newsletter-input-group {
    display: flex;
    gap: 1.2rem;
    margin-bottom: 1.2rem;
  }
  
  .footer__newsletter-input {
    flex: 1;
    padding: 1.2rem;
    border: 1px solid rgba(var(--color-base-text), 0.2);
    border-radius: var(--inputs-radius);
    font-size: 1.4rem;
    background-color: rgb(var(--color-base-background-1));
    color: rgb(var(--color-base-text));
  }
  
  .footer__newsletter-input:focus {
    outline: none;
    border-color: rgb(var(--color-base-accent-1));
  }
  
  .footer__newsletter-button {
    padding: 1.2rem 2.4rem;
    background-color: rgb(var(--color-base-accent-1));
    color: rgb(var(--color-base-solid-button-labels));
    border: none;
    border-radius: var(--buttons-radius);
    font-size: 1.4rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s ease;
    white-space: nowrap;
  }
  
  .footer__newsletter-button:hover {
    background-color: rgb(var(--color-base-accent-2));
  }
  
  .footer__newsletter-message {
    font-size: 1.4rem;
    margin: 0;
  }
  
  .footer__newsletter-message--success {
    color: rgb(var(--color-base-accent-1));
  }
  
  .footer__newsletter-message--error {
    color: #dc2626;
  }
  
  .footer__social {
    display: flex;
    gap: 1.6rem;
  }
  
  .footer__social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 4.4rem;
    height: 4.4rem;
    background-color: rgba(var(--color-base-text), 0.1);
    color: rgb(var(--color-base-text));
    border-radius: 50%;
    text-decoration: none;
    transition: all 0.2s ease;
  }
  
  .footer__social-link:hover {
    background-color: rgb(var(--color-base-accent-1));
    color: rgb(var(--color-base-solid-button-labels));
    transform: translateY(-2px);
  }
  
  .footer__text {
    font-size: 1.4rem;
    line-height: 1.6;
    color: rgb(var(--color-base-text));
  }
  
  .footer__bottom {
    border-top: 1px solid rgba(var(--color-base-text), 0.1);
    padding-top: 2.4rem;
  }
  
  .footer__bottom-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 2.4rem;
  }
  
  .footer__copyright p {
    font-size: 1.4rem;
    color: rgba(var(--color-base-text), 0.7);
    margin: 0;
  }
  
  .footer__payment {
    display: flex;
    align-items: center;
    gap: 1.2rem;
  }
  
  .footer__payment-label {
    font-size: 1.4rem;
    color: rgba(var(--color-base-text), 0.7);
  }
  
  .footer__payment-icons {
    display: flex;
    gap: 0.8rem;
  }
  
  .footer__payment-icons svg {
    width: 3.8rem;
    height: 2.4rem;
    color: rgba(var(--color-base-text), 0.6);
  }
  
  @media (max-width: 749px) {
    .footer__columns {
      grid-template-columns: 1fr;
      gap: 2.4rem;
    }
    
    .footer__newsletter-input-group {
      flex-direction: column;
    }
    
    .footer__bottom-content {
      flex-direction: column;
      text-align: center;
    }
  }
{% endstylesheet %}

{% javascript %}
  class FooterNewsletter {
    constructor() {
      this.form = document.querySelector('[data-newsletter-form]');
      this.message = document.querySelector('[data-newsletter-message]');
      
      if (!this.form) return;
      
      this.bindEvents();
    }
    
    bindEvents() {
      this.form.addEventListener('submit', (e) => {
        e.preventDefault();
        this.handleSubmit();
      });
    }
    
    async handleSubmit() {
      const formData = new FormData(this.form);
      const email = formData.get('email');
      
      if (!email) {
        this.showMessage('Please enter your email address', 'error');
        return;
      }
      
      try {
        // This would integrate with your email provider (Klaviyo, Mailchimp, etc.)
        const response = await fetch('/contact#contact_form', {
          method: 'POST',
          body: formData
        });
        
        if (response.ok) {
          this.showMessage('Thanks for subscribing!', 'success');
          this.form.reset();
        } else {
          throw new Error('Subscription failed');
        }
      } catch (error) {
        console.error('Newsletter subscription error:', error);
        this.showMessage('Something went wrong. Please try again.', 'error');
      }
    }
    
    showMessage(text, type) {
      this.message.textContent = text;
      this.message.className = `footer__newsletter-message footer__newsletter-message--${type}`;
      
      setTimeout(() => {
        this.message.textContent = '';
        this.message.className = 'footer__newsletter-message';
      }, 5000);
    }
  }
  
  document.addEventListener('DOMContentLoaded', () => {
    new FooterNewsletter();
  });
{% endjavascript %}

{% schema %}
{
  "name": "Footer",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_newsletter",
      "label": "Show newsletter signup",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "label": "Show social links",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_payment_icons",
      "label": "Show payment icons",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "link_list",
      "name": "Link list",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Quick links"
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Menu"
        }
      ]
    },
    {
      "type": "newsletter",
      "name": "Newsletter signup",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Subscribe to our emails"
        },
        {
          "type": "text",
          "id": "subheading",
          "label": "Subheading",
          "default": "Be the first to know about new collections and exclusive offers."
        },
        {
          "type": "text",
          "id": "email_placeholder",
          "label": "Email placeholder",
          "default": "Email"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button text",
          "default": "Subscribe"
        }
      ]
    },
    {
      "type": "social",
      "name": "Social links",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Follow us"
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "About us"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Share information about your brand with your customers.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Footer",
      "blocks": [
        {
          "type": "link_list",
          "settings": {
            "heading": "Company"
          }
        },
        {
          "type": "link_list",
          "settings": {
            "heading": "Customer Service"
          }
        },
        {
          "type": "newsletter"
        },
        {
          "type": "social"
        }
      ]
    }
  ]
}
{% endschema %}
